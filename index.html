<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Plataforma de GestÃ£o Integrada</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { display: flex; height: 100vh; background: #0f172a; color: white; overflow: hidden; }
        
        .sidebar { width: 260px; background: #1e293b; display: flex; flex-direction: column; border-right: 1px solid #334155; transition: 0.3s; flex-shrink: 0; }
        .sidebar.collapsed { width: 70px; }
        
        .toggle-btn { padding: 20px; cursor: pointer; background: none; border: none; color: #f97316; font-size: 20px; text-align: left; }
        .nav-btn { width: 100%; padding: 15px 20px; border: none; background: none; color: #94a3b8; text-align: left; cursor: pointer; display: flex; align-items: center; gap: 15px; white-space: nowrap; }
        .nav-btn:hover { background: #334155; color: white; }
        .nav-btn.active { background: rgba(249, 115, 22, 0.1); color: #f97316; border-left: 4px solid #f97316; }
        
        .sidebar.collapsed .btn-text { display: none; }
        .main { flex: 1; background: #f1f5f9; position: relative; }
        iframe { width: 100%; height: 100%; border: none; display: none; }
        .welcome { height: 100%; display: flex; align-items: center; justify-content: center; color: #64748b; }
    </style>
</head>
<body>

    <div class="sidebar" id="sidebar">
        <button class="toggle-btn" onclick="document.getElementById('sidebar').classList.toggle('collapsed')">â˜°</button>
        <div class="nav">
            <button class="nav-btn" onclick="lancar('controle de cobranÃ§a.html', this)">
                <span>ðŸ’°</span> <span class="btn-text">Fluxo de CobranÃ§a</span>
            </button>
            <button class="nav-btn" onclick="lancar('teste.html.html', this)">
                <span>ðŸ“Š</span> <span class="btn-text">GestÃ£o Financeira</span>
            </button>
            <button class="nav-btn" onclick="lancar('gerador_relatorios.html', this)">
                <span>ðŸ“ˆ</span> <span class="btn-text">Gerador de RelatÃ³rios</span>
            </button>
        </div>
    </div>

    <div class="main">
        <div id="status" class="welcome"><h2>Selecione um mÃ³dulo</h2></div>
        <iframe id="janela"></iframe>
    </div>

    <script>
        let memoriaDados = null;

        function lancar(url, btn) {
            const frame = document.getElementById('janela');
            document.getElementById('status').style.display = 'none';
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            frame.style.display = 'block';
            frame.src = "./" + url;
        }

        // PONTE DE DADOS
        window.addEventListener("message", (e) => {
            if (e.data.type === "DATA_TRANSFER") {
                memoriaDados = e.data.payload;
            }
            if (e.data.type === "REQUEST_DATA" && memoriaDados) {
                document.getElementById('janela').contentWindow.postMessage({
                    type: "FILL_REPORT",
                    payload: memoriaDados
                }, "*");
            }
        });
    </script>
</body>
</html>
